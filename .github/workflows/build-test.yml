name: ðŸ”¨ Build Test

on:
  pull_request:
  workflow_dispatch:


jobs:
  build:
    name: Test Builds
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-go@v5
        with:
          go-version: 1.21

      - name: Test
        run: go test ./...

      - name: Build
        run: go build .
        working-directory: cmd/shuffledns/

      # Installing massdns
      - uses: actions/checkout@master
        with:
          name: blechschmidt/massdns
          path: ./massdns

      - name: Install massdns
        working-directory: ./massdns
        run: |
          ls
          make all
          make install
        
      # Tests
      # - name: Basic Usage
      #   run: go run . -d scanme.sh -r ../../tests/resolvers.txt -w ../../tests/wordlist.txt
      #   working-directory: cmd/shuffledns/
